(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,,function(e,t,n){e.exports=n.p+"static/media/hero.78a1c8b6.png"},,,function(e,t,n){e.exports=n.p+"static/media/start.ae51d949.png"},function(e,t,n){e.exports=n.p+"static/media/finish.02137b12.png"},,function(e,t,n){e.exports=n.p+"static/media/retro.1925e39e.png"},function(e,t,n){e.exports=n.p+"static/media/red.784f2095.png"},function(e,t,n){e.exports=n.p+"static/media/range.c8a4c999.png"},function(e,t,n){e.exports=n.p+"static/media/mercedes.672119b2.png"},function(e,t,n){e.exports=n.p+"static/media/enemy.171cec71.png"},function(e,t,n){e.exports=n.p+"static/media/pothole.559719db.png"},function(e,t,n){e.exports=n.p+"static/media/track.423bb034.mp3"},,,function(e,t,n){e.exports=n(39)},,,,,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(9),i=n.n(o),s=(n(27),n(20)),c=n(21),l=n(1),p=n(2),m=n(4),u=n(3),f=n(5),h=(n(29),n(6)),d=n.n(h),v=(n(31),function(e){function t(){return Object(l.a)(this,t),Object(m.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props,t=e.isGameActive,n=e.lap,a=e.displayScore,o=e.tableScore;return r.a.createElement("div",{className:"wrap-score"},r.a.createElement("p",{className:"score"},"Score: ",a),r.a.createElement("p",{className:"lap"},t?"Lap: ".concat(n):"Start the game"),r.a.createElement("table",null,r.a.createElement("tbody",null,o.map(function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("td",null,"Lap ",t+1),r.a.createElement("td",null,e))}))))}}]),t}(a.PureComponent)),g=(n(33),n(7)),b=n.n(g),S=n(10),y=n.n(S),E=n(11),w=n.n(E),O=function(e){function t(){return Object(l.a)(this,t),Object(m.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props.score;return r.a.createElement("div",{className:"progress-root"},r.a.createElement("img",{src:b.a,className:"progress-hero",alt:"hero",style:{top:"".concat(100-e/50,"%")}}),r.a.createElement("img",{src:y.a,alt:"start",className:"progress-edge start"}),Array(6).fill(0).map(function(e,t){return r.a.createElement("div",{key:t,className:"progress-point"})}),r.a.createElement("img",{src:w.a,alt:"finish",className:"progress-edge finish"}))}}]),t}(a.PureComponent),C=n(12),k=n.n(C),G=(n(35),n(13)),A=n.n(G),j=n(14),N=n.n(j),F=n(15),x=n.n(F),P=n(16),q=n.n(P),D=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(m.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={position:k.a.from({left:10,top:300})},n.move={left:null,right:null,up:null,down:null},n.handleKeyDown=function(e){var t=e.keyCode,a=n.props,r=a.isGameOver,o=a.hasCrash;if(!r&&!o){if(37===t&&!n.move.left)return n.move.left=requestAnimationFrame(n.left);if(39===t&&!n.move.right)return n.move.right=requestAnimationFrame(n.right);if(38===t&&!n.move.up)return n.move.up=requestAnimationFrame(n.up);if(40===t&&!n.move.down)return n.move.down=requestAnimationFrame(n.down)}},n.handleKeyUp=function(e){var t=e.keyCode,a=n.props,r=a.isGameOver,o=a.changeMultiScore;if(!r)switch(t){case 37:cancelAnimationFrame(n.move.left),n.move.left=null;break;case 39:cancelAnimationFrame(n.move.right),n.move.right=null;break;case 38:cancelAnimationFrame(n.move.up),n.move.up=null,o(!1);break;case 40:cancelAnimationFrame(n.move.down),n.move.down=null;break;default:return null}},n.left=function(){var e=n.state.position,t=n.props,a=t.isGameOver,r=t.hasCrash;!a&&!r&&e.left>0&&(n.setState({position:e.set("left",e.left-5)}),n.move.left=requestAnimationFrame(n.left))},n.right=function(){var e=n.state.position,t=n.props,a=t.isGameOver,r=t.hasCrash,o=t.container;!a&&!r&&e.left<o.offsetWidth-40&&(n.setState({position:e.set("left",e.left+5)}),n.move.right=requestAnimationFrame(n.right))},n.up=function(){var e=n.state.position,t=n.props,a=t.isGameOver,r=t.hasCrash,o=t.hasPot,i=t.changeMultiScore;!a&&!r&&!o&&e.top>0&&(n.setState({position:e.set("top",e.top-3)}),n.move.up=requestAnimationFrame(n.up),i(!0))},n.down=function(){var e=n.state.position,t=n.props,a=t.isGameOver,r=t.hasCrash,o=t.container;!a&&!r&&e.top<o.offsetHeight-70&&(n.setState({position:e.set("top",e.top+3)}),n.move.down=requestAnimationFrame(n.down))},n.getImage=function(){switch(n.props.lap){case 1:return b.a;case 2:return x.a;case 3:return q.a;case 4:return N.a;case 5:return A.a;default:return b.a}},n}return Object(f.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),document.addEventListener("keyup",this.handleKeyUp)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown"),document.removeEventListener("keyup")}},{key:"render",value:function(){var e=this.props,t=e.setRef,n=e.hasCrash;return r.a.createElement("img",{src:this.getImage(),ref:t,style:this.state.position,className:d()("car",{crashed:n}),alt:"hero"})}}]),t}(a.PureComponent);function M(e){var t=e.offsetTop,n=e.offsetLeft;return{top:t,left:n,right:e.offsetWidth+n,bottom:e.offsetHeight+t}}function W(e,t){return Math.floor(Math.random()*(t-e+1))+e}var L=n(17),I=n.n(L),H=n(18),R=n.n(H),K=(n(37),function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(m.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).initialEnemiesCoords=[{top:W(-50,-150),left:"".concat(W(0,80),"%")},{top:W(-225,-300),left:"".concat(W(0,80),"%")},{top:W(-400,-500),left:"".concat(W(0,80),"%")}],n.initialPotsCoords=[{top:W(-50,-100),left:"".concat(W(0,80),"%")},{top:W(-300,-400),left:"".concat(W(0,80),"%")},{top:W(-500,-600),left:"".concat(W(0,80),"%")},{top:W(-650,-700),left:"".concat(W(0,80),"%")}],n.carDown=function(e){var t=n.props.speed,a=parseInt(e.style.top);a>n.container.clientHeight&&(a=-200,e.style.left="".concat(Math.random()*(n.container.clientWidth-e.clientWidth),"px")),e.style.top="".concat(a+t,"px")},n.lineDown=function(e){var t=n.props.lineSpeed,a=parseInt(e.style.top);a>n.container.clientHeight&&(a=-300),e.style.top="".concat(a+t,"px")},n.potDown=function(e){var t=n.props.lineSpeed,a=parseInt(e.style.top);a>n.container.clientHeight&&(a=-300,e.style.left="".concat(Math.random()*(n.container.clientWidth-e.clientWidth),"px")),e.style.top="".concat(a+t,"px")},n}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.children,a=t.lines,o=t.enemies,i=t.pots;return r.a.createElement("div",null,r.a.createElement("div",{className:"help"},r.a.createElement("p",null,"Controls: Right, Left, Up & Down arrow keys.")),r.a.createElement("div",{className:"road",ref:function(t){e.container=t}},[-150,150,450].map(function(e,t){return r.a.createElement("div",{key:t,ref:function(e){a[t]=e},className:"line",style:{top:e}})}),n(this.container),this.initialEnemiesCoords.map(function(e,t){var n=e.top,a=e.left;return r.a.createElement("img",{src:I.a,key:t,className:"car",ref:function(e){o[t]=e},style:{top:n,left:a},alt:"enemy"})}),this.initialPotsCoords.map(function(e,t){var n=e.top,a=e.left;return r.a.createElement("img",{key:t,src:R.a,alt:"pot",ref:function(e){i[t]=e},className:"pot",style:{top:n,left:a}})})))}}]),t}(a.PureComponent)),U=n(19),T=n.n(U),B={isGameOver:!1,isGameActive:!1,score:1,tableScore:[],displayScore:0,speed:2,lineSpeed:5,benefits:[0,0],lap:1,multiScore:!1,hasPot:!1,hasCrash:!1},J=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(m.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state=B,n.enemies=[],n.lines=[],n.pots=[],n.startGame=function(){n.setState({isGameActive:!0}),n.game=requestAnimationFrame(n.renderGame),new Audio(T.a).play()},n.restartGame=function(){n.setState(B,n.startGame)},n.changeMultiScore=function(e){return n.setState({multiScore:e})},n.renderGame=function(){var e=n.state,t=e.hasPot,a=e.hasCrash;n.game=requestAnimationFrame(n.renderGame),n.hasCollision(n.hero,n.enemies)&&!a&&(n.setState(function(e){return{hasCrash:!0,speed:-2,lineSpeed:0,savedSpeed:{speed:e.speed,lineSpeed:e.lineSpeed}}}),setTimeout(function(){return n.setState(function(e){var t=e.savedSpeed,n=e.benefits;return{hasCrash:!1,hasPot:!1,speed:t.speed+n[0],lineSpeed:t.lineSpeed+n[1],benefits:[0,0]}})},2e3)),n.hasCollision(n.hero,n.pots)&&!t&&(n.setState(function(e){return{hasPot:!0,speed:e.speed-6,lineSpeed:e.lineSpeed-3}}),setTimeout(function(){n.setState(function(e){return e.hasCrash?{benefits:[e.benefits[0]+6,e.benefits[1]+3]}:{hasPot:!1,speed:e.speed+6,lineSpeed:e.lineSpeed+3}})},1e3)),n.calculateScore(),6!==n.state.lap?(n.enemies.forEach(function(e){return n.road.carDown(e)}),n.lines.forEach(function(e){return n.road.lineDown(e)}),n.pots.forEach(function(e){return n.road.potDown(e)})):n.cancelGame()},n.cancelGame=function(){n.setState({isGameOver:!0,isGameActive:!1}),cancelAnimationFrame(n.game)},n.stopGame=function(){n.setState({isGameActive:!1}),cancelAnimationFrame(n.game)},n.hasCollision=function(e,t){return t.some(function(t){var n=M(e),a=M(t);return!(n.bottom<a.top||n.top>a.bottom||n.right<a.left||n.left>a.right)})},n.calculateScore=function(){var e=n.state,t=e.score,a=e.multiScore,r=e.hasPot,o=e.hasCrash;if(n.setState(function(e){return{score:e.score+1}}),!(t%20)){var i=a?2:1;i=r?.25*i:i,i=o?0:i,n.setState(function(e){return{displayScore:e.displayScore+i}})}t%1e3||n.setState(function(e){var t=e.hasCrash?{benefits:[e.benefits[0]+1,e.benefits[1]+1]}:{speed:e.speed+1,lineSpeed:e.lineSpeed+1};return Object(c.a)({},t,{lap:e.lap+1,tableScore:Object(s.a)(e.tableScore).concat([e.displayScore-e.tableScore.reduce(function(e,t){return e+t},0)])})})},n}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this,t=this.state,n=t.isGameOver,a=t.displayScore,o=t.lap,i=t.score,s=t.hasCrash,c=t.hasPot,l=t.tableScore,p=t.isGameActive,m=t.speed,u=t.lineSpeed;return r.a.createElement(r.a.Fragment,null,r.a.createElement("main",{className:"main"},r.a.createElement(O,{score:i}),r.a.createElement("div",{className:"wrap-road"},r.a.createElement(K,{speed:m,lineSpeed:u,lines:this.lines,enemies:this.enemies,pots:this.pots,ref:function(t){e.road=t}},function(t){return r.a.createElement(r.a.Fragment,null,r.a.createElement(D,{setRef:function(t){e.hero=t},isGameOver:n,container:t,changeMultiScore:e.changeMultiScore,hasCrash:s,hasPot:c,lap:o}),r.a.createElement("div",{className:d()("wrap-restart",{visible:n||!p})},r.a.createElement("button",{className:"restart",onClick:a?e.restartGame:e.startGame},a?"Restart":"Start")))}),r.a.createElement("button",{className:d()("action-game",{visible:a&&!n}),onClick:p?this.stopGame:this.startGame},p?"Stop":"Resume")),r.a.createElement(v,{isGameActive:p,lap:o,displayScore:a,tableScore:l})))}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(J,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}],[[22,2,1]]]);
//# sourceMappingURL=main.099769ec.chunk.js.map